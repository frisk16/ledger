<!DOCTYPE html>
<html lang="ja" xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <div th:replace="~{fragment :: meta}"></div>
  <div th:replace="~{fragment :: styles}"></div>
  <title>支払いデータ</title>
</head>
<body>
  <div th:replace="~{fragment :: header}"></div>

  <div th:if="${param.continue}" class="alert alert-primary text-center">
    ログインしました
  </div>
  <div th:if="${successMsg}" class="alert alert-success text-center">
    <span th:text="${successMsg}"></span>
  </div>

  <div class="background"></div>
  <a href="#" id="paymentsOpenMenuBtn">
    <i class="fa-2x fa-solid fa-bars"></i>
  </a>
  <aside>
    <div class="d-flex justify-content-between">
      <p>MENU</p>
      <button type="button" id="paymentsCloseMenuBtn" class="btn-close bg-white d-md-none"></button>
    </div>
    <div class="container mt-3">
      <a th:href="@{/categories}" class="text-info">
        <i class="fa-solid fa-gear"></i>
        カテゴリー設定
      </a>
      <hr>
      <div th:if="${!categories.isEmpty()}" class="mt-3">
        <ul>
          <li th:each="category : ${categories}" class="mb-3">
            <i class="fa-solid fa-caret-right"></i>
            <a href="#" th:text="${category.getName()}" class="text-light fs-6 ms-2"></a>
          </li> 
        </ul>
      </div>
      <div th:unless="${!categories.isEmpty()}" class="mt-3">
        <h6 class="text-center">
          <i class="fa-3x fa-solid fa-triangle-exclamation"></i>
          <p class="mt-3">カテゴリーがありません</p>
        </h6>
      </div>
    </div>
  </aside>

  <main class="py-5">
    <div class="container mt-3">
      <div class="row justify-content-end">
        <div class="col-payments mt-3">
          <div class="d-flex justify-content-between mb-3">
            <h5 class="page-title">支払いデータ</h5>
            <a th:href="@{/payments/add}">
              <i class="fa-solid fa-file-circle-plus"></i>
              データ追加
            </a>
          </div>

          <div th:if="${!payments.isEmpty()}" class="row justify-content-center">
            <ul class="col-xl-8 col-lg-10 col-md-12 col-10">
              <li th:each="payment : ${payments}">
                <div class="row mb-1">
                  <div class="col-6">
                    <p th:text="${#temporals.format(payment.getDate(), 'yyyy年MM月dd日')}"></p>
                  </div>
                  <div class="col-6 text-end">
                    <a href="#" class="text-success">
                      <i class="fa-solid fa-pencil"></i>
                    </a>
                    <span>｜</span>
                    <a href="#" class="text-danger">
                      <i class="fa-solid fa-trash-can"></i>
                    </a>
                  </div>
                </div>
                <div class="row align-items-center mb-2">
                  <div class="col-2 text-secondary text-center">
                    <i th:class="${methodIcons.get(payment.getMethod())}"></i>
                  </div>
                  <div class="col-2 text-end text-sm-start">
                    <i class="fa-solid fa-forward"></i>
                  </div>
                  <div class="col-8">
                    <strong th:text="${payment.getName()}"></strong>
                  </div>
                </div>
                <div class="row">
                  <div class="col-6">
                    <strong class="text-primary" th:text="${'￥' + payment.getPrice() + '円'}"></strong>
                  </div>
                  <div class="col-6 text-end">
                    <span>分類カテゴリー：</span>
                    <strong th:text="${payment.getCategory().getName()}"></strong>
                  </div>
                </div>
                <hr>
              </li>
            </ul>
          </div>

          <div th:unless="${!payments.isEmpty()}" class="container">
            <h5 class="text-center text-secondary">
              <i class="fa-5x fa-solid fa-triangle-exclamation"></i>
              <p class="mt-3">支払いデータがありません</p>
              <a th:if="${!categories.isEmpty()}" th:href="@{/payments/add}" class="small">
                <i class="fa-solid fa-file-circle-plus"></i>
                データ追加
              </a>
              <a th:unless="${!categories.isEmpty()}" th:href="@{/categories}" class="small">
                <i class="fa-solid fa-folder-plus"></i>
                まずカテゴリーから追加
              </a>
            </h5>
          </div>
        </div>
      </div>
    </div>
  </main>

  <div class="row justify-content-end">
    <div class="col-payments">
      <div th:replace="~{fragment :: footer}"></div>
    </div>
  </div>

  <div th:replace="~{fragment :: scripts}"></div>
  <script th:src="@{/js/payments.js}"></script>
</body>
</html>